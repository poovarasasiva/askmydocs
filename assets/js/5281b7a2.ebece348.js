"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2443],{936:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"architecture","title":"System Architecture","description":"AskMyDocs follows Clean Architecture with clear separation of concerns.","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/askmydocs/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/poovarasasiva/askmydocs/tree/main/website/docs/architecture.md","tags":[],"version":"current","frontMatter":{"id":"architecture","title":"System Architecture","sidebar_label":"Architecture"},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/askmydocs/docs/getting-started"},"next":{"title":"Backend","permalink":"/askmydocs/docs/backend"}}');var s=i(4848),l=i(8453);const t={id:"architecture",title:"System Architecture",sidebar_label:"Architecture"},a="\ud83c\udfd7\ufe0f System Architecture",c={},d=[{value:"High-Level Architecture",id:"high-level-architecture",level:2},{value:"Clean Architecture Layers",id:"clean-architecture-layers",level:2},{value:"1. <strong>Presentation Layer</strong> (API)",id:"1-presentation-layer-api",level:3},{value:"2. <strong>Application Layer</strong>",id:"2-application-layer",level:3},{value:"3. <strong>Domain Layer</strong>",id:"3-domain-layer",level:3},{value:"4. <strong>Infrastructure Layer</strong>",id:"4-infrastructure-layer",level:3},{value:"Design Patterns",id:"design-patterns",level:2},{value:"Data Flow",id:"data-flow",level:2},{value:"Document Upload Flow",id:"document-upload-flow",level:3},{value:"Question Answering Flow",id:"question-answering-flow",level:3},{value:"Security Architecture",id:"security-architecture",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Data Protection",id:"data-protection",level:3},{value:"Scalability Design",id:"scalability-design",level:2},{value:"Stateless API",id:"stateless-api",level:3},{value:"Database Optimization",id:"database-optimization",level:3},{value:"Caching Strategy",id:"caching-strategy",level:3},{value:"Monitoring &amp; Observability",id:"monitoring--observability",level:2},{value:"Logging (Serilog)",id:"logging-serilog",level:3},{value:"Health Checks",id:"health-checks",level:3},{value:"Metrics",id:"metrics",level:3},{value:"Technology Stack",id:"technology-stack",level:2},{value:"Backend",id:"backend",level:3},{value:"Frontend",id:"frontend",level:3},{value:"AI &amp; ML",id:"ai--ml",level:3},{value:"Infrastructure",id:"infrastructure",level:3},{value:"\ud83d\udcda Related Docs",id:"-related-docs",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\ufe0f-system-architecture",children:"\ud83c\udfd7\ufe0f System Architecture"})}),"\n",(0,s.jsxs)(n.p,{children:["AskMyDocs follows ",(0,s.jsx)(n.strong,{children:"Clean Architecture"})," with clear separation of concerns."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"high-level-architecture",children:"High-Level Architecture"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart TB\n    subgraph Client\n        UI[Angular 20 SPA]\n    end\n    subgraph Backend\n        API[.NET 10 API]\n        App[Application Layer]\n        Domain[Domain Layer]\n        Infra[Infrastructure Layer]\n    end\n    subgraph External\n        HF[Hugging Face API]\n        DB[(MongoDB)]\n    end\n    UI --\x3e|REST| API\n    API --\x3e App\n    App --\x3e Domain\n    App --\x3e Infra\n    Infra --\x3e DB\n    Infra --\x3e HF"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"clean-architecture-layers",children:"Clean Architecture Layers"}),"\n",(0,s.jsxs)(n.h3,{id:"1-presentation-layer-api",children:["1. ",(0,s.jsx)(n.strong,{children:"Presentation Layer"})," (API)"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Controllers"}),"\n",(0,s.jsx)(n.li,{children:"Middleware"}),"\n",(0,s.jsx)(n.li,{children:"Filters"}),"\n",(0,s.jsx)(n.li,{children:"Request/Response models"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"2-application-layer",children:["2. ",(0,s.jsx)(n.strong,{children:"Application Layer"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"CQRS commands/queries"}),"\n",(0,s.jsx)(n.li,{children:"MediatR handlers"}),"\n",(0,s.jsx)(n.li,{children:"Business logic"}),"\n",(0,s.jsx)(n.li,{children:"DTOs & validators"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"3-domain-layer",children:["3. ",(0,s.jsx)(n.strong,{children:"Domain Layer"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Core entities"}),"\n",(0,s.jsx)(n.li,{children:"Value objects"}),"\n",(0,s.jsx)(n.li,{children:"Domain interfaces"}),"\n",(0,s.jsx)(n.li,{children:"Business rules"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"4-infrastructure-layer",children:["4. ",(0,s.jsx)(n.strong,{children:"Infrastructure Layer"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Repositories"}),"\n",(0,s.jsx)(n.li,{children:"External API clients"}),"\n",(0,s.jsx)(n.li,{children:"Database context"}),"\n",(0,s.jsx)(n.li,{children:"File parsers"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"design-patterns",children:"Design Patterns"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Pattern"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Location"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CQRS"})}),(0,s.jsx)(n.td,{children:"Separate reads/writes"}),(0,s.jsx)(n.td,{children:"Application layer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"MediatR"})}),(0,s.jsx)(n.td,{children:"Decouple handlers"}),(0,s.jsx)(n.td,{children:"Application layer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Repository"})}),(0,s.jsx)(n.td,{children:"Abstract data access"}),(0,s.jsx)(n.td,{children:"Infrastructure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Factory"})}),(0,s.jsx)(n.td,{children:"Build complex objects"}),(0,s.jsx)(n.td,{children:"Infrastructure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Strategy"})}),(0,s.jsx)(n.td,{children:"File parsing logic"}),(0,s.jsx)(n.td,{children:"Infrastructure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Options"})}),(0,s.jsx)(n.td,{children:"Typed configuration"}),(0,s.jsx)(n.td,{children:"All layers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Middleware"})}),(0,s.jsx)(n.td,{children:"Cross-cutting concerns"}),(0,s.jsx)(n.td,{children:"Presentation"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"data-flow",children:"Data Flow"}),"\n",(0,s.jsx)(n.h3,{id:"document-upload-flow",children:"Document Upload Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant U as User\n    participant UI as Angular\n    participant API as .NET API\n    participant P as Parser\n    participant E as Embeddings\n    participant DB as MongoDB\n    \n    U->>UI: Upload PDF\n    UI->>API: POST /api/upload\n    API->>P: Parse document\n    P->>API: Extracted text\n    API->>E: Chunk & embed\n    E->>API: Vectors\n    API->>DB: Save document + embeddings\n    DB->>API: Success\n    API->>UI: 200 OK\n    UI->>U: Upload complete"}),"\n",(0,s.jsx)(n.h3,{id:"question-answering-flow",children:"Question Answering Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant U as User\n    participant UI as Angular\n    participant API as .NET API\n    participant DB as MongoDB\n    participant HF as Hugging Face\n    \n    U->>UI: Ask question\n    UI->>API: POST /api/chat/ask\n    API->>API: Generate query embedding\n    API->>DB: Vector similarity search\n    DB->>API: Top 3 chunks\n    API->>HF: Generate answer\n    HF->>API: AI response\n    API->>UI: Answer + citations\n    UI->>U: Display answer"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"security-architecture",children:"Security Architecture"}),"\n",(0,s.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JWT tokens"})," with claims for Admin and upload operation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Custom middleware"})," for chat operation"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Per-user request throttling"}),"\n",(0,s.jsx)(n.li,{children:"Configurable limits"}),"\n",(0,s.jsx)(n.li,{children:"Distributed-ready"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"data-protection",children:"Data Protection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Password hashing (bcrypt)"}),"\n",(0,s.jsx)(n.li,{children:"Secure token storage (hashed the token and stored in DB)"}),"\n",(0,s.jsx)(n.li,{children:"HTTPS enforcement"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"scalability-design",children:"Scalability Design"}),"\n",(0,s.jsx)(n.h3,{id:"stateless-api",children:"Stateless API"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No server-side sessions"}),"\n",(0,s.jsx)(n.li,{children:"JWT in headers"}),"\n",(0,s.jsx)(n.li,{children:"Horizontally scalable"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"database-optimization",children:"Database Optimization"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Indexed vector search"}),"\n",(0,s.jsx)(n.li,{children:"Connection pooling"}),"\n",(0,s.jsx)(n.li,{children:"Sharding-ready schema"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"caching-strategy",children:"Caching Strategy"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"In-memory for documents"}),"\n",(0,s.jsx)(n.li,{children:"Redis-ready for distributed cache"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"monitoring--observability",children:"Monitoring & Observability"}),"\n",(0,s.jsx)(n.h3,{id:"logging-serilog",children:"Logging (Serilog)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Structured JSON logs"}),"\n",(0,s.jsx)(n.li,{children:"Request/response tracking"}),"\n",(0,s.jsx)(n.li,{children:"Error correlation IDs"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:'GET /health\n\n{\n  "status": "Healthy",\n  "totalChecks": 2,\n  "checks": [\n    {\n      "name": "MongoDB",\n      "status": "Healthy",\n      "description": "MongoDB connection is healthy",\n      "exception": null\n    },\n    {\n      "name": "HuggingFace AI Service",\n      "status": "Healthy",\n      "description": "HuggingFace API is reachable.",\n      "exception": null\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"metrics",children:"Metrics"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API response times"}),"\n",(0,s.jsx)(n.li,{children:"Error rates"}),"\n",(0,s.jsx)(n.li,{children:"Database query performance"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"technology-stack",children:"Technology Stack"}),"\n",(0,s.jsx)(n.h3,{id:"backend",children:"Backend"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:".NET 10"})," - Runtime"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ASP.NET Core"})," - Web framework"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"MongoDB.Driver"})," - Database client"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"MediatR"})," - CQRS implementation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FluentValidation"})," - Request validation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Polly"})," - Resilience & retry"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"frontend",children:"Frontend"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Angular 20"})," - Framework"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"PrimeNG"})," - UI components"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tailwind CSS"})," - Styling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RxJS"})," - Reactive programming"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TypeScript"})," - Type safety"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ai--ml",children:"AI & ML"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hugging Face Inference API"})," - LLM"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sentence Transformers"})," - Embeddings (all-mpnet-base-v2)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker"})," - Containerization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker Compose"})," - Local orchestration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GitHub Actions"})," - CI/CD"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Render"})," - API hosting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Netlify"})," - UI hosting"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"-related-docs",children:"\ud83d\udcda Related Docs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/backend",children:"Backend Architecture"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/ai-engine",children:"AI Engine"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/deployment",children:"Deployment"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);