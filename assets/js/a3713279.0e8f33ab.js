"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9588],{1989:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"deployment","title":"Deployment Guide","description":"This document covers containerization, CI/CD, and environment configuration for AskMyDocs.","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/askmydocs/docs/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/poovarasasiva/askmydocs/tree/main/website/docs/deployment.md","tags":[],"version":"current","frontMatter":{"id":"deployment","title":"Deployment Guide","sidebar_label":"Deployment"},"sidebar":"tutorialSidebar","previous":{"title":"AI Engine","permalink":"/askmydocs/docs/ai-engine"},"next":{"title":"Troubleshooting","permalink":"/askmydocs/docs/troubleshooting"}}');var d=s(4848),t=s(8453);const l={id:"deployment",title:"Deployment Guide",sidebar_label:"Deployment"},r="\ud83d\ude80 Deployment Guide",o={},c=[{value:"\ud83e\uddf1 Docker Setup",id:"-docker-setup",level:2},{value:"<strong>Dockerfile \u2014 Backend</strong>",id:"dockerfile--backend",level:3},{value:"<strong>Dockerfile \u2014 Frontend</strong>",id:"dockerfile--frontend",level:3},{value:"<strong>docker-compose.yml</strong>",id:"docker-composeyml",level:3},{value:"\ud83c\udf0d Environment Configuration",id:"-environment-configuration",level:2},{value:"\u2699\ufe0f CI/CD Pipeline (GitHub Actions)",id:"\ufe0f-cicd-pipeline-github-actions",level:2},{value:"<code>.github/workflows/deploy.yml</code>",id:"githubworkflowsdeployyml",level:3},{value:"\u2601\ufe0f Deployment Targets",id:"\ufe0f-deployment-targets",level:2},{value:"\ud83e\ude7a Health &amp; Monitoring",id:"-health--monitoring",level:2},{value:"\u2705 Deployment Checklist",id:"-deployment-checklist",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"-deployment-guide",children:"\ud83d\ude80 Deployment Guide"})}),"\n",(0,d.jsxs)(n.p,{children:["This document covers containerization, CI/CD, and environment configuration for ",(0,d.jsx)(n.strong,{children:"AskMyDocs"}),"."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"-docker-setup",children:"\ud83e\uddf1 Docker Setup"}),"\n",(0,d.jsx)(n.p,{children:"The entire stack (API, frontend, and MongoDB) is fully containerized."}),"\n",(0,d.jsx)(n.h3,{id:"dockerfile--backend",children:(0,d.jsx)(n.strong,{children:"Dockerfile \u2014 Backend"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-dockerfile",children:'FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base\nWORKDIR /app\nEXPOSE 5000\n\nFROM mcr.microsoft.com/dotnet/sdk:10.0 AS build\nWORKDIR /src\nCOPY ["AskMyDocs.API/AskMyDocs.API.csproj", "AskMyDocs.API/"]\nRUN dotnet restore "AskMyDocs.API/AskMyDocs.API.csproj"\nCOPY . .\nRUN dotnet publish "AskMyDocs.API/AskMyDocs.API.csproj" -c Release -o /app/publish\n\nFROM base AS final\nWORKDIR /app\nCOPY --from=build /app/publish .\nENTRYPOINT ["dotnet", "AskMyDocs.API.dll"]\n'})}),"\n",(0,d.jsx)(n.h3,{id:"dockerfile--frontend",children:(0,d.jsx)(n.strong,{children:"Dockerfile \u2014 Frontend"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-dockerfile",children:'FROM node:20-alpine AS build\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nRUN npm run build\n\nFROM nginx:alpine\nCOPY --from=build /app/dist /usr/share/nginx/html\nEXPOSE 80\nCMD ["nginx", "-g", "daemon off;"]\n'})}),"\n",(0,d.jsx)(n.h3,{id:"docker-composeyml",children:(0,d.jsx)(n.strong,{children:"docker-compose.yml"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'version: "3.9"\nservices:\n  api:\n    build: ./src/AskMyDocs.API\n    ports:\n      - "5000:80"\n    env_file:\n      - .env\n    depends_on:\n      - mongodb\n\n  frontend:\n    build: ./AskMyDocs.UI\n    ports:\n      - "4200:80"\n    depends_on:\n      - api\n\n  mongodb:\n    image: mongo:8.0\n    container_name: askmydocs-db\n    ports:\n      - "27017:27017"\n    volumes:\n      - mongodb_data:/data/db\n\nvolumes:\n  mongodb_data:\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"-environment-configuration",children:"\ud83c\udf0d Environment Configuration"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Variable"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Example"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MONGODB_CONNECTION"})}),(0,d.jsx)(n.td,{children:"MongoDB URI"}),(0,d.jsx)(n.td,{children:"mongodb://mongodb:27017"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"HUGGINGFACE_API_KEY"})}),(0,d.jsx)(n.td,{children:"AI API key"}),(0,d.jsx)(n.td,{children:"hf_XXXXXXXX"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"JWT_SECRET"})}),(0,d.jsx)(n.td,{children:"JWT signing key"}),(0,d.jsx)(n.td,{children:"randomstring123"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"JWT_ISSUER"})}),(0,d.jsx)(n.td,{children:"Token issuer"}),(0,d.jsx)(n.td,{children:"AskMyDocsAPI"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"JWT_AUDIENCE"})}),(0,d.jsx)(n.td,{children:"Token audience"}),(0,d.jsx)(n.td,{children:"AskMyDocsUsers"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\ufe0f-cicd-pipeline-github-actions",children:"\u2699\ufe0f CI/CD Pipeline (GitHub Actions)"}),"\n",(0,d.jsx)(n.h3,{id:"githubworkflowsdeployyml",children:(0,d.jsx)(n.code,{children:".github/workflows/deploy.yml"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:"name: Deploy to Render\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v4\n\n      - name: Set up .NET\n        uses: actions/setup-dotnet@v4\n        with:\n          dotnet-version: 10.0.x\n\n      - name: Restore dependencies\n        run: dotnet restore src/AskMyDocs.API\n\n      - name: Build and publish\n        run: dotnet publish src/AskMyDocs.API -c Release -o publish\n\n      - name: Deploy to Render\n        run: curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK }}\n"})}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Tip:"})," Store your ",(0,d.jsx)(n.code,{children:"RENDER_DEPLOY_HOOK"})," and API keys securely in ",(0,d.jsx)(n.strong,{children:"GitHub Secrets"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"\ufe0f-deployment-targets",children:"\u2601\ufe0f Deployment Targets"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Environment"}),(0,d.jsx)(n.th,{children:"Platform"}),(0,d.jsx)(n.th,{children:"URL"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Frontend"})}),(0,d.jsx)(n.td,{children:"Netlify"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"https://askmydocuments.netlify.app",children:"askmydocuments.netlify.app"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Backend"})}),(0,d.jsx)(n.td,{children:"Render"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"https://askmydocs-0dfe.onrender.com",children:"askmydocs-0dfe.onrender.com"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Database"})}),(0,d.jsx)(n.td,{children:"MongoDB Atlas"}),(0,d.jsx)(n.td,{children:"Managed cluster"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"AI Service"})}),(0,d.jsx)(n.td,{children:"Hugging Face API"}),(0,d.jsx)(n.td,{children:"Hosted"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"-health--monitoring",children:"\ud83e\ude7a Health & Monitoring"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Health Endpoint:"})," ",(0,d.jsx)(n.code,{children:"/health"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Status Codes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Healthy"}),": All dependencies functional"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Degraded"}),": Some services slow/unavailable"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"Unhealthy"}),": Critical failure"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Integrate with:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"UptimeRobot"})," for ping checks"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Serilog + Seq"})," for structured logs"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Grafana/Prometheus"})," (optional) for metrics"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"-deployment-checklist",children:"\u2705 Deployment Checklist"}),"\n",(0,d.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,d.jsxs)(n.li,{className:"task-list-item",children:[(0,d.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Environment variables configured"]}),"\n",(0,d.jsxs)(n.li,{className:"task-list-item",children:[(0,d.jsx)(n.input,{type:"checkbox",disabled:!0})," ","MongoDB connection verified"]}),"\n",(0,d.jsxs)(n.li,{className:"task-list-item",children:[(0,d.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Hugging Face API key active"]}),"\n",(0,d.jsxs)(n.li,{className:"task-list-item",children:[(0,d.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ports 4200 / 5000 open"]}),"\n",(0,d.jsxs)(n.li,{className:"task-list-item",children:[(0,d.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Health check returns \u201cHealthy\u201d"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsx)(n.p,{children:'"You don\u2019t ship when it\u2019s perfect \u2014 you ship when it\u2019s predictable."'}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}}}]);